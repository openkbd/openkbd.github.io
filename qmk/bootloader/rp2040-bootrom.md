# RP2040 BootROM

RP2040 芯片内部固化了一个ROM 引导程序(出厂时烧录，不可修改)，它的使用方法也比较简单。进入刷机模式后会显示一个名为 `RPI-RP2` 的 磁盘设备，之后只需要把要烧录的文件(UF2格式)放入其中就行。

raspberrypi也提供了这部分的源代码:  https://github.com/raspberrypi/pico-bootrom-rp2040 ，有兴趣的可以参看。

下文主要讲解怎么在本站使用RP2040的键盘上，更新固件。

## 进入刷机模式

进入刷机模式有多种方法，使用下面的任意一种均可。其中方法1到3，需要键盘工作正常时才可用(指能正常连接电脑识别为USB键盘并可用于打字)。

### 1 使用默认快捷键

在键盘还能正常工作时，可以使用 <kbd>LShift+RShift+LCtrl+B</kbd> 这个组合快捷键，直接进入刷机模式。

### 2 使用BootMagic

在键盘所有按键能正常工作时，先拔掉USB线，再按住键盘左上角的按键(一般是<kbd>Esc</kbd>)，然后再插入USB线，键盘也会自动刷机模式。此时可放开按键。

### 3 使用设置的特殊按键

可以给键盘按键配置里，设置一个 <kbd>Reset</kbd>，点击后，可以进入刷机模式。

### 4 使用BOOTSEL

这是RP2040自带的方法，即使键盘工作不正常(即键盘固件出问题时)，也能用它进入刷机模式。

保持短接PCB上标注为BOOTSEL的两点，或者按住标为BOOTSEL的按键且不放，再插入USB线，这时键盘进入刷机模式。此时可放BOOTSEL。

## 烧录固件

键盘固件的格式是UF2，直接将固件文件复制粘贴或者拖动到 `RPI-RP2` 的 磁盘设备里，该UF2文件就会自动烧录到键盘里，然后键盘会重启。

除了键盘固件外，其他比如图片或声音等资源文件，也可以用UF2格式的方式写入到键盘里。但是每次只能烧录一个文件。